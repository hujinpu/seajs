/*
Copyright 2011, SeaJS v0.4.0dev
MIT Licensed
build time: ${build.time}
*/

var module=module||{};module.seajs="0.4.0dev";
(function(I){function z(a,b){b.id=a;b.dependencies=r(b.dependencies,a);l[m(a)]=b}function A(a){for(var b=[],d=0,c=a.length,e;d<c;d++){e=a[d];l[m(e)]||b.push(e)}return b}function B(a){a=a||{deps:[]};return function(b){b=r(b,a.id);var d;if(J(a.deps,b)===-1||!(d=l[m(b)]))throw"Invalid module id: "+b;if(C(a,b)){var c=a;if(I.console)for(b=b;c;){b+=" <-- "+c.id;c=c.parent}return d.exports}if(!d.exports){c=d;b=a;var e=c.factory;delete c.factory;if(n.call(e)==="[object Function]"){if(b=e(new B({id:c.id,parent:b,
deps:c.dependencies}),c.exports={},(c.declare=D,c.provide=o,c)))c.exports=b}else c.exports=e||{}}return d.exports}}function C(a,b){if(a.id===b)return true;if(a.parent)return C(a.parent,b);return false}function o(a,b,d){function c(){if(b)b(d?undefined:new B({id:"provide(["+a+"])",deps:a}))}a=A(r(a));if(a.length===0)return c();for(var e=0,f=a.length,h=f;e<f;e++)(function(E){K(E,function(){var p=(l[m(E)]||0).dependencies||[],s=p.length;if(s){p=A(p);h+=s;o(p,function(){h-=s;h===0&&c()},true)}--h===0&&
c()})})(a[e])}function D(a,b,d){if(F(a)){d=b;b=a;a=""}else if(n.call(a)==="[object Function]"){d=a;b=[];a=""}if(t){if(!a){var c;a:{c=q.getElementsByTagName("script");for(var e,f=0,h=c.length;f<h;f++){e=c[f];if(e.readyState==="interactive"){c=e;break a}}c=void 0}if(c)a=c.src.replace(u+"/","").replace(/\.js.*$/,"");else if(i)if(G()-i.timestamp<L)a=i.id}i=null}b={dependencies:b,factory:d};if(a){z(a,b);j=null}else j=b}function K(a,b){function d(){if(j){z(a,j);j=null}k[c]&&delete k[c];b&&b()}var c=m(a);
if(k[c])v(k[c],d);else{if(t)i={id:a,timestamp:G()};k[c]=M(c,d)}}function M(a,b){var d=document.createElement("script");v(d,function(){b&&b.call(d);try{if(d.clearAttributes)d.clearAttributes();else for(var c in d)delete d[c]}catch(e){}q.removeChild(d)});d.async=true;d.src=a;return q.insertBefore(d,q.firstChild)}function v(a,b){a.addEventListener("load",b,false);a.addEventListener("error",function(){b()},false)}function H(a){return(a=("./"+a).replace(/(.*)?\/.*/,"$1").substring(2))?a:"."}function w(a){if(N.call(x,
a))return x[a];else{var b=a.split("/"),d=[],c,e,f;e=0;for(f=b.length;e<f;e++){c=b[e];if(c==".."){if(d.length===0)throw"Invalid module path: "+a;d.pop()}else c!=="."&&d.push(c)}return x[a]=d.join("/")}}function m(a){if(a===""||a.indexOf("://")!==-1)return a;if(a.charAt(0)==="/")a=a.substring(1);return w(u+"/"+a)+".js"}function r(a,b){var d,c=b?H(b)+"/":"";if(F(a)){var e=0,f=a.length;for(d=[];e<f;e++)d.push(w(a[e].indexOf(".")===0?c+a[e]:a[e]))}else if(n.call(a)==="[object String]")d=w(a.indexOf(".")===
0?c+a:a);return d}var n=Object.prototype.toString,N=Object.prototype.hasOwnProperty,F=Array.isArray?Array.isArray:function(a){return n.call(a)==="[object Array]"},J=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var d=0,c=a.length;d<c;d++)if(a[d]===b)return d;return-1},G=Date.now||function(){return(new Date).getTime()},k={},j=null,i=null,L=10,t=!+"\v1",l={},g=document.getElementsByTagName("script");g=g[g.length-1];var u=H(g.hasAttribute?g.src:g.getAttribute("src",
4)),q=document.getElementsByTagName("head")[0];if(t)v=function(a,b){a.attachEvent("onreadystatechange",function(){var d=a.readyState;if(d==="loaded"||d==="complete")b()})};var x={},y=g.getAttribute("data-main");y&&o([y],function(a){a(y)});module.provide=o;module.declare=D;module.reset=function(a){k={};l={};i=j=null;if(a)u=a}})(this);
